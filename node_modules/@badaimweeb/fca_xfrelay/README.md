# FCA over XFRelay

## Overview

This API might be the only way to automate chat functionalities on a Facebook user account for now (the old method is being deprecated and blocked by Facebook).
By using a browser and hook to native JS API on Facebook, this API can automate a user account without using any Facebook API key, secret, or credentials.

*Disclaimer*: We are not responsible if your account gets banned for spammy activities such as: sending lots of messages to people you don't know, sending messages very quickly, sending spammy looking URLs, etc...

**YOU ARE THE ONLY ONE RESPONSIBLE FOR YOUR ACTIONS. USE THIS API AT YOUR OWN RISK.**

**NOT COMPATIBLE WITH OLD FCA API (Schmavery's/fca-unofficial one).**

## Requirements

You need to have a Chromium-based browser installed on the device you want to login your account with ([XFRelay](https://github.com/BadAimWeeb/xfrelay) (>=1.2.0) will use this browser to interact with Facebook). Browser can be a different device than the one you are running your bot on.

You also need to find a relay server ([or run one by yourself](https://github.com/BadAimWeeb/xfrelay_server)) to relay data from browser to your bot (this API). [Public relay server might be available for you to use.](#public-relay-server)

## Compatibility

This API is compatible with node.js **version 20** and above.

(Deno and Bun is not tested and not supported yet.)

**This API cannot be imported using Common.js `require()`. ESM usage is forced.** If you want to import this API using Common.js, please use async `import()`.

## Features

```
- [x] Read live messages
- [x] Send messages (basic)
- [x] Send attachments
- [x] Send complicated message data (almost)
- [x] Parse and invoke Meta AI messages
- [x] Read/send reactions
- [x] Read edit message event
- [x] Edit messages
- [x] Read delete message event
- [x] Delete messages
- [x] Create thread
- [x] Read basic thread info
- [ ] Read advanced thread info
- [/] Modify thread info
- [ ] Using admin operation in thread
- [x] Read user info
- ... and more
```

## Install

*TODO: Currently not available on npm because of __closed__ beta. If you can read this you already know how to install lol.*

## Testing your bots

If you want to test your bots first (without using your real account), you might want to use [Facebook Whitehat Accounts](https://www.facebook.com/whitehat/accounts/) to avoid getting banned on your main account.

## Usage

```js
import loginToRelay from "@badaimweeb/fca_xfrelay";

const api = await loginToRelay({
    relayAddress: "wss://relay-server.com/!hash",
    accountID: "00000000-0000-0000-0000-000000000000",
    encryptionKey: "742bce73051adff70350589e9709f8a0015592fceb407323a75814ce635f77dd"
});

// do stuff with api, for example:
// listen for new messages
api.on("message", (message) => {
    console.log(`New message from ${message.thread.id}: ${message.content}`);

    if (message.isSelf) return;

    // and reply back (echo :D)
    message.reply(message.content)
        .then(m => {
            // and then edit?
            m.edit("I'm edited now!");
        });
});
```

## License

This API is licensed under [MIT License](LICENSE). Copyright ©️ 2023-2024 BadAimWeeb.

(tl;dr: you can use this API for free as long as you retain the license notice and author name)

## Public relay server

*Note*: Usage of these servers is not guaranteed. They might be down at any time. You MUST also have to accept their terms of service before using them.

- BadAimWeeb's Public XFRelay 1 (E01)
    + Terms of service: Not available yet
    + Region: Singapore
    + Address: `wss://xfrelay-1.badaimweeb.me/!39b5744aac59de5ac1a39b7276bf68ab304d03a78fb5b7962568632ced977202`
